{
  "instance_id": "350f90",
  "problem_statement": "The current bookstore backend is a proof-of-concept service that is blocking frontend development because it only partially supports read and buy operations and lacks proper CRUD functionality. At present, books are identified solely by their titles, which makes updates impossible and causes data collisions, while storage in a Vec results in inefficient O(n) lookups without any indexing. The service also lacks endpoints for creating, updating, or deleting books, returns plain string errors instead of proper HTTP status codes, and accepts invalid input such as negative prices, empty titles, or stock values. The objective is to refactor the backend into a full-featured CRUD service using Rust and Actix Web, replacing the Vec with an in-memory HashMap keyed by UUIDs to provide O(1) lookups and ensure thread-safe access with Arc<Mutex<>>. The service must implement endpoints to create, read, update, and delete books with proper validation—ensuring non-empty titles and authors, positive prices, and non-negative stock—and must reject attempts to modify immutable fields like title or ID. All endpoints should return structured JSON responses with correct HTTP status codes, using a custom error type instead of string messages. The refactored service must maintain high performance, handling single CRUD operations in under 5ms, listing 10,000 books in under 100ms, and supporting 100 concurrent requests without data corruption or panics. Success is measured by functional CRUD operations with enforced validation, O(1) lookups via HashMap, concurrency safety, proper HTTP responses, and tests that demonstrate the system fails under the old implementation but passes after refactoring.",
  "base_commit": "repository_before",
  "test_patch": "tests/",
  "github_url": "https://github.com/eaglepoint-ai/bd_dataset_001/tree/main",
  "environment_setup": "Dockerfile",
  "FAIL_TO_PASS": [
    "test_create_book_success",
    "test_create_book_empty_title_returns_400",
    "test_create_book_empty_author_returns_400",
    "test_create_book_negative_price_returns_400",
    "test_create_book_zero_price_returns_400",
    "test_get_book_by_id_success",
    "test_get_book_not_found_returns_404",
    "test_update_book_partial_update_success",
    "test_update_book_reject_title_change",
    "test_update_book_reject_id_change",
    "test_update_book_empty_author_returns_400",
    "test_update_book_negative_price_returns_400",
    "test_delete_book_success",
    "test_delete_book_not_found_returns_404",
    "test_concurrent_create_requests"
  ],
  "PASS_TO_PASS": [
    "test_get_books_empty_returns_empty_array"
  ]
}