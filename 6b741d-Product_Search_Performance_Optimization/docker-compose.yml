
services:
  before:
    build: .
    command: sh -c "echo '--- /app at runtime (compose) ---' && ls -l /app && echo '--- /app/tests at runtime (compose) ---' && ls -l /app/tests || echo 'No /app/tests directory' && npx mocha tests/productSearch.before.test.js"
    volumes:
      - .:/app:Z
    working_dir: /app
    tty: true

  after:
    build: .
    command: npx mocha tests/productSearch.after.test.js
    volumes:
      - .:/app:Z
    working_dir: /app
    tty: true

  evaluation:
    build: .
    command: node evaluation/evaluation.js
    volumes:
      - .:/app:Z
    working_dir: /app
    tty: true

