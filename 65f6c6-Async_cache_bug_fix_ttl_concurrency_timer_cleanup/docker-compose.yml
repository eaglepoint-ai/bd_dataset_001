services:
  # Service to run the standard evaluation (generates latest.json)
  evaluator:
    build: .
    volumes:
      - ./evaluation/reports:/app/evaluation/reports
    command: node evaluation/evaluation.js

  # Command to specifically run the BEFORE (original) code
  test-before:
    build: .
    environment:
      - TARGET_IMPL=repository_before/AsyncCache.js
    command: node tests/test.js

  # Command to specifically run the AFTER (updated) code
  test-after:
    build: .
    environment:
      - TARGET_IMPL=repository_after/AsyncCache.js
    command: node tests/test.js

