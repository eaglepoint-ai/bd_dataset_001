{
  "timestamp": "2026-01-15T11:57:58.244395",
  "run_date": "2026-01-15 11:57:58",
  "before": {
    "tests": {
      "total": 25,
      "passed": 6,
      "failed": 19,
      "errors": 0,
      "skipped": 0
    },
    "return_code": 1,
    "passed": false,
    "output": {
      "text": "============================= test session starts ==============================\nplatform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /usr/local/bin/python3.11\ncachedir: .pytest_cache\nrootdir: /app\ncollecting ... collected 25 items\n\ntests/test_email_parser.py::TestSimpleEmails::test_simple_plaintext_email FAILED [  4%]\ntests/test_email_parser.py::TestSimpleEmails::test_html_email FAILED     [  8%]\ntests/test_email_parser.py::TestSimpleEmails::test_multipart_with_attachments FAILED [ 12%]\ntests/test_email_parser.py::TestSimpleEmails::test_rfc2047_subject_decoding FAILED [ 16%]\ntests/test_email_parser.py::TestSimpleEmails::test_quoted_printable_body FAILED [ 20%]\ntests/test_email_parser.py::TestSimpleEmails::test_base64_body_with_linebreaks FAILED [ 24%]\ntests/test_email_parser.py::TestEdgeCases::test_nested_multipart FAILED  [ 28%]\ntests/test_email_parser.py::TestEdgeCases::test_header_folding FAILED    [ 32%]\ntests/test_email_parser.py::TestEdgeCases::test_multiple_received_headers FAILED [ 36%]\ntests/test_email_parser.py::TestEdgeCases::test_boundary_in_body_content PASSED [ 40%]\ntests/test_email_parser.py::TestEdgeCases::test_missing_content_type PASSED [ 44%]\ntests/test_email_parser.py::TestEdgeCases::test_crlf_vs_lf_mixed PASSED  [ 48%]\ntests/test_email_parser.py::TestEdgeCases::test_rfc2231_filename_encoding FAILED [ 52%]\ntests/test_email_parser.py::TestEdgeCases::test_inline_attachments FAILED [ 56%]\ntests/test_email_parser.py::TestErrorHandling::test_malformed_email_partial_parse FAILED [ 60%]\ntests/test_email_parser.py::TestErrorHandling::test_invalid_base64_graceful FAILED [ 64%]\ntests/test_email_parser.py::TestErrorHandling::test_missing_boundary FAILED [ 68%]\ntests/test_email_parser.py::TestErrorHandling::test_invalid_charset PASSED [ 72%]\ntests/test_email_parser.py::TestPublicAPI::test_get_headers FAILED       [ 76%]\ntests/test_email_parser.py::TestPublicAPI::test_get_body FAILED          [ 80%]\ntests/test_email_parser.py::TestPublicAPI::test_get_attachments FAILED   [ 84%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_before_has_bugs PASSED [ 88%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_after_fixes_bugs FAILED [ 92%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_before_header_folding_fails PASSED [ 96%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_after_header_folding_works FAILED [100%]\n\n=================================== FAILURES ===================================\n_________________ TestSimpleEmails.test_simple_plaintext_email _________________\ntests/test_email_parser.py:41: in test_simple_plaintext_email\n    assert 'simple plain text email' in result.body.lower()\nE   AssertionError: assert 'simple plain text email' in ''\nE    +  where '' = <built-in method lower of str object at 0x7be99a1dcea0>()\nE    +    where <built-in method lower of str object at 0x7be99a1dcea0> = ''.lower\nE    +      where '' = ParseResult(headers={'from': 'sender@example.com', 'to': 'recipient@example.com', 'subject': 'Simple Test Email', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'content-type': 'text/plain; charset=utf-8'}, body='', html_body=None, attachments=[], errors=[]).body\n_______________________ TestSimpleEmails.test_html_email _______________________\ntests/test_email_parser.py:55: in test_html_email\n    assert isinstance(result.headers.get('from', []), list), \"Headers must be List[str]\"\nE   AssertionError: Headers must be List[str]\nE   assert False\nE    +  where False = isinstance('sender@example.com', list)\nE    +    where 'sender@example.com' = <built-in method get of dict object at 0x7be998762700>('from', [])\nE    +      where <built-in method get of dict object at 0x7be998762700> = {'content-type': 'text/html; charset=utf-8', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'from': 'sender@example.com', 'mime-version': '1.0', ...}.get\nE    +        where {'content-type': 'text/html; charset=utf-8', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'from': 'sender@example.com', 'mime-version': '1.0', ...} = ParseResult(headers={'from': 'sender@example.com', 'to': 'recipient@example.com', 'subject': 'Multipart Test Email', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'mime-version': '1.0', 'content-type': 'text/html; charset=utf-8'}, body='', html_body=None, attachments=[], errors=[]).headers\n_______________ TestSimpleEmails.test_multipart_with_attachments _______________\ntests/test_email_parser.py:71: in test_multipart_with_attachments\n    assert isinstance(result.headers.get('from', []), list), \"Headers must be List[str]\"\nE   AssertionError: Headers must be List[str]\nE   assert False\nE    +  where False = isinstance('sender@example.com', list)\nE    +    where 'sender@example.com' = <built-in method get of dict object at 0x7be998768740>('from', [])\nE    +      where <built-in method get of dict object at 0x7be998768740> = {'content-disposition': 'attachment; filename=\"image.png\"', 'content-transfer-encoding': 'base64', 'content-type': 'image/png', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', ...}.get\nE    +        where {'content-disposition': 'attachment; filename=\"image.png\"', 'content-transfer-encoding': 'base64', 'content-type': 'image/png', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', ...} = ParseResult(headers={'from': 'sender@example.com', 'to': 'recipient@example.com', 'subject': 'Email with Attachments', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'mime-version': '1.0', 'content-type': 'image/png', 'content-disposition': 'attachment; filename=\"image.png\"', 'content-transfer-encoding': 'base64'}, body='', html_body=None, attachments=[], errors=[]).headers\n________________ TestSimpleEmails.test_rfc2047_subject_decoding ________________\ntests/test_email_parser.py:87: in test_rfc2047_subject_decoding\n    assert isinstance(result.headers['subject'], list), \"Headers must be List[str]\"\nE   AssertionError: Headers must be List[str]\nE   assert False\nE    +  where False = isinstance('=?UTF-8?B?SGVsbG8gV29ybGQ=?=', list)\n_________________ TestSimpleEmails.test_quoted_printable_body __________________\ntests/test_email_parser.py:100: in test_quoted_printable_body\n    assert 'soft break that continues' in result.body\nE   AssertionError: assert 'soft break that continues' in ''\nE    +  where '' = ParseResult(headers={'from': 'sender@example.com', 'to': 'recipient@example.com', 'subject': '=?UTF-8?B?SGVsbG8gV29ybGQ=?=', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'content-type': 'text/plain; charset=utf-8', 'content-transfer-encoding': 'quoted-printable', 'and hex encoding': '=C3=A9 (should be Ã©)'}, body='', html_body=None, attachments=[], errors=[]).body\n______________ TestSimpleEmails.test_base64_body_with_linebreaks _______________\ntests/test_email_parser.py:111: in test_base64_body_with_linebreaks\n    assert len(result.attachments) >= 2\nE   assert 0 >= 2\nE    +  where 0 = len([])\nE    +    where [] = ParseResult(headers={'from': 'sender@example.com', 'to': 'recipient@example.com', 'subject': 'Email with Attachments', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', 'mime-version': '1.0', 'content-type': 'image/png', 'content-disposition': 'attachment; filename=\"image.png\"', 'content-transfer-encoding': 'base64'}, body='', html_body=None, attachments=[], errors=[]).attachments\n_____________________ TestEdgeCases.test_nested_multipart ______________________\ntests/test_email_parser.py:127: in test_nested_multipart\n    assert isinstance(result.headers.get('subject', []), list), \"Headers must be List[str]\"\nE   AssertionError: Headers must be List[str]\nE   assert False\nE    +  where False = isinstance('Nested Multipart Email', list)\nE    +    where 'Nested Multipart Email' = <built-in method get of dict object at 0x7be99874dcc0>('subject', [])\nE    +      where <built-in method get of dict object at 0x7be99874dcc0> = {'content-disposition': 'attachment; filename=\"doc.pdf\"', 'content-transfer-encoding': 'base64', 'content-type': 'application/pdf', 'date': 'Mon, 15 Jan 2026 10:00:00 +0000', ...}.get\nE    +        where {'content-disposition\n\n... [truncated] ...",
      "truncated": true,
      "original_length": 15321
    },
    "errors": {
      "text": "",
      "truncated": false,
      "original_length": 0
    }
  },
  "after": {
    "tests": {
      "total": 25,
      "passed": 25,
      "failed": 0,
      "errors": 0,
      "skipped": 0
    },
    "return_code": 0,
    "passed": true,
    "output": {
      "text": "============================= test session starts ==============================\nplatform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /usr/local/bin/python3.11\ncachedir: .pytest_cache\nrootdir: /app\ncollecting ... collected 25 items\n\ntests/test_email_parser.py::TestSimpleEmails::test_simple_plaintext_email PASSED [  4%]\ntests/test_email_parser.py::TestSimpleEmails::test_html_email PASSED     [  8%]\ntests/test_email_parser.py::TestSimpleEmails::test_multipart_with_attachments PASSED [ 12%]\ntests/test_email_parser.py::TestSimpleEmails::test_rfc2047_subject_decoding PASSED [ 16%]\ntests/test_email_parser.py::TestSimpleEmails::test_quoted_printable_body PASSED [ 20%]\ntests/test_email_parser.py::TestSimpleEmails::test_base64_body_with_linebreaks PASSED [ 24%]\ntests/test_email_parser.py::TestEdgeCases::test_nested_multipart PASSED  [ 28%]\ntests/test_email_parser.py::TestEdgeCases::test_header_folding PASSED    [ 32%]\ntests/test_email_parser.py::TestEdgeCases::test_multiple_received_headers PASSED [ 36%]\ntests/test_email_parser.py::TestEdgeCases::test_boundary_in_body_content PASSED [ 40%]\ntests/test_email_parser.py::TestEdgeCases::test_missing_content_type PASSED [ 44%]\ntests/test_email_parser.py::TestEdgeCases::test_crlf_vs_lf_mixed PASSED  [ 48%]\ntests/test_email_parser.py::TestEdgeCases::test_rfc2231_filename_encoding PASSED [ 52%]\ntests/test_email_parser.py::TestEdgeCases::test_inline_attachments PASSED [ 56%]\ntests/test_email_parser.py::TestErrorHandling::test_malformed_email_partial_parse PASSED [ 60%]\ntests/test_email_parser.py::TestErrorHandling::test_invalid_base64_graceful PASSED [ 64%]\ntests/test_email_parser.py::TestErrorHandling::test_missing_boundary PASSED [ 68%]\ntests/test_email_parser.py::TestErrorHandling::test_invalid_charset PASSED [ 72%]\ntests/test_email_parser.py::TestPublicAPI::test_get_headers PASSED       [ 76%]\ntests/test_email_parser.py::TestPublicAPI::test_get_body PASSED          [ 80%]\ntests/test_email_parser.py::TestPublicAPI::test_get_attachments PASSED   [ 84%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_before_has_bugs PASSED [ 88%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_after_fixes_bugs PASSED [ 92%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_before_header_folding_fails PASSED [ 96%]\ntests/test_email_parser.py::TestBeforeVsAfter::test_after_header_folding_works PASSED [100%]\n\n============================== 25 passed in 0.93s ==============================\n",
      "truncated": false,
      "original_length": 2466
    },
    "errors": {
      "text": "",
      "truncated": false,
      "original_length": 0
    }
  },
  "comparison": {
    "improvement": true,
    "tests_fixed": 19,
    "all_tests_pass": true,
    "summary": "After implementation: 25/25 tests passed. Improvement: 19 additional tests passing."
  },
  "success": true
}